<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>HANGMAN</title>
<style>
  :root{
    --bg: #000000;
    --green: #00FF66; /* PET-like green */
  }
  html,body{height:100%;margin:0;background:var(--bg);color:var(--green);font-family:"Courier New",Courier,monospace;box-sizing:border-box;}
  /* All printed letters uppercase */
  body { text-transform: uppercase; }

  /* App layout (minimal) */
  .app { min-height:100%; display:flex; flex-direction:column; align-items:center; padding:18px; gap:12px; }

  header { width:100%; text-align:center; font-size:2.6rem; letter-spacing:0.26rem; margin-top:6px; margin-bottom:6px; }

  /* Row: left hook (fixed) and right letters area (flex).
     The hook has a fixed height so the letters row can be vertically centered between top & bottom. */
  .row { width:100%; max-width:1100px; display:flex; gap:12px; align-items:flex-start; }
  .hook { width:160px; min-width:120px; height:220px; display:flex; align-items:flex-start; justify-content:center; }
  .letters-wrap { flex:1; display:flex; align-items:center; min-height:220px; justify-content:center; }
  .letters { display:flex; gap:12px; align-items:center; white-space:nowrap; overflow:auto; }

  .slot { min-width:28px; padding:6px 2px 10px 2px; text-align:center; border-bottom:2px solid var(--green); font-size:1.6rem; line-height:1; letter-spacing:0.12rem; }
  .slot.revealed { font-weight:700; }

  /* Bottom guessed box */
  .guessed-box { width:100%; max-width:1100px; border:2px solid var(--green); padding:10px; min-height:56px; display:flex; gap:8px; align-items:center; flex-wrap:wrap; box-sizing:border-box; }
  .guessed-title { margin-right:6px; font-size:0.9rem; }
  .guessed-letter { min-width:26px; height:30px; display:inline-flex; align-items:center; justify-content:center; border:1px solid rgba(0,255,102,0.12); padding:2px 6px; font-weight:700; }

  /* End message area directly below guessed box (minimal) */
  .endbox { width:100%; max-width:1100px; min-height:36px; color:var(--green); font-size:1rem; padding:8px 6px; box-sizing:border-box; }

  .glow { text-shadow:0 0 6px rgba(0,255,102,0.12); }

  @media (max-width:520px){
    .hook{display:none;} /* keep minimal on tiny screens */
    .letters-wrap { min-height:140px; align-items:center; }
    header{font-size:1.7rem;}
  }
</style>
</head>
<body>
  <div class="app" role="application" aria-label="Hangman">
    <header class="glow">HANGMAN</header>

    <div class="row" id="playRow">
      <!-- Hook SVG -->
      <div class="hook" aria-hidden="true">
        <svg id="hangmanSvg" width="140" height="220" viewBox="0 0 140 220" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Hangman's hook and figure">
          <rect x="18" y="8" width="6" height="190" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
          <rect x="24" y="8" width="78" height="6" fill="currentColor"/>
          <path d="M104 14 C106 34 84 40 84 56" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
          <circle cx="84" cy="56" r="3" fill="currentColor"/>

          <!-- pieces (hidden initially) -->
          <g id="piece-1" visibility="hidden" stroke="currentColor" fill="none" stroke-width="3"><circle cx="84" cy="78" r="16"/></g>
          <g id="piece-2" visibility="hidden" stroke="currentColor" fill="none" stroke-width="3"><line x1="84" y1="94" x2="84" y2="140" stroke-linecap="round"/></g>
          <g id="piece-3" visibility="hidden" stroke="currentColor" fill="none" stroke-width="3"><line x1="84" y1="106" x2="62" y2="120" stroke-linecap="round"/></g>
          <g id="piece-4" visibility="hidden" stroke="currentColor" fill="none" stroke-width="3"><line x1="84" y1="106" x2="106" y2="120" stroke-linecap="round"/></g>
          <g id="piece-5" visibility="hidden" stroke="currentColor" fill="none" stroke-width="3"><line x1="84" y1="140" x2="64" y2="168" stroke-linecap="round"/></g>
          <g id="piece-6" visibility="hidden" stroke="currentColor" fill="none" stroke-width="3"><line x1="84" y1="140" x2="104" y2="168" stroke-linecap="round"/></g>
        </svg>
      </div>

      <!-- Hidden letters area -->
      <div class="letters-wrap" aria-hidden="false">
        <div id="letters" class="letters" aria-live="polite" aria-label="Hidden letters"></div>
      </div>
    </div>

    <!-- Bottom guessed letters box (alphabetical) -->
    <div class="guessed-box" aria-live="polite" aria-label="Guessed letters">
      <div class="guessed-title">GUESSED:</div>
      <div id="guessedList" style="display:flex;gap:6px;flex-wrap:wrap"></div>
    </div>

    <!-- End message area (below guessed box): win/lose and press ENTER to play again -->
    <div class="endbox" id="endBox" aria-live="assertive" role="status"></div>
  </div>

<script>
/*
  Hangman SPA (single HTML file)

  Runtime behavior:
  - Fetches a public top-5000 plain-text word list (mirror) and extracts candidate words.
    Source used (public raw list): https://raw.githubusercontent.com/MichaelWehar/Public-Domain-Word-Lists/master/5000-more-common.txt
    If the fetch fails or not enough candidates, the app falls back to a small embedded list so the game still works.
  - Filters words to meet constraints:
    * Only letters A-Z (no digits/punctuation)
    * Length 6..10
    * At least 5 distinct letters
    * Uppercased for play
  - Selects 100 unique words randomly for the game's bank.
  - Minimal UI per your spec. No extra controls.
*/

/* URL of public plain-text top-5000 word list (mirror) */
const TOP5000_RAW = "https://raw.githubusercontent.com/MichaelWehar/Public-Domain-Word-Lists/master/5000-more-common.txt";

/* Utility: check constraints */
function meetsConstraints(w){
  if(!w || typeof w!=='string') return false;
  if(!/^[A-Za-z]+$/.test(w)) return false; // letters only
  if(w.length < 6 || w.length > 10) return false;
  const distinct = new Set(w.toUpperCase().split('')).size;
  return distinct >= 5;
}

/* Shuffle */
function shuffle(a){
  for(let i=a.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [a[i],a[j]] = [a[j],a[i]];
  }
}

/* Embedded fallback word bank (100 words) used if fetch fails */
const FALLBACK_BANK = [
  "PEOPLE","BECAUSE","THROUGH","BETWEEN","WITHOUT","COUNTRY","ANOTHER","COMPANY","PROBLEM","EXAMPLE",
  "POSSIBLE","IMPORTANT","QUESTION","REMEMBER","MATERIAL","NATIONAL","PERSONAL","PRACTICE","RESEARCH","ACTIVITY",
  "ACTUALLY","PROBABLY","SECURITY","LANGUAGE","POSITION","COMMUNITY","CUSTOMER","BUSINESS","DECISION","INCLUDING",
  "CHILDREN","PRESIDENT","EDUCATION","HOSPITAL","MEDICINE","COMPUTER","INTERNET","SOFTWARE","NETWORK","STUDIES",
  "READING","HISTORY","DETAILS","OFFICIAL","ADDRESS","MEASURE","CONTROL","SERVICE","PRODUCT","PROCESS",
  "SUPPORT","QUALITY","BENEFIT","CHAPTER","SECTION","ACCOUNT","PICTURE","BALANCE","OPERATE","PATTERN",
  "ARTICLE","INSTEAD","SUBJECT","PROGRAM","LIBRARY","TEACHER","STUDENT","PRIVACY","FASHION","FUNCTION",
  "INSTANCE","VARIABLE","AVAILABLE","TELEPHONE","CONTAINER","MATERIALS","STRUCTURE","COMPLETE","CONSIDER","EXHIBITS",
  "TRAVELER","ADVISORY","SCHEDULE","CAMPAIGN","STRANGER","DEPARTMENT","REFERENCE","SITUATION","PRODUCER","EXPENSES",
  "TRIANGLE","ALGORITHM","ELEVATOR","BROADWAY","DISCOUNT","NOTEBOOK","PAINTING","CAMERA","JOURNAL","CANDIDATE"
];

/* Game state */
let BANK = [];      // 100-word bank used for game
let secret = "";    // uppercase secret
let revealed = [];  // booleans
let guessed = new Set();
let wrong = 0;      // wrong guesses (0..6)
let ended = false;
let lastSecret = null;

/* DOM refs */
const lettersEl = document.getElementById('letters');
const guessedListEl = document.getElementById('guessedList');
const endBox = document.getElementById('endBox');

/* Show/hide hangman piece */
function revealPiece(n){ const g = document.getElementById(`piece-${n}`); if(g) g.setAttribute('visibility','visible'); }
function hideAllPieces(){ for(let i=1;i<=6;i++){ const g=document.getElementById(`piece-${i}`); if(g) g.setAttribute('visibility','hidden'); } }

/* Render slots */
function render(){
  lettersEl.innerHTML = "";
  for(let i=0;i<secret.length;i++){
    const slot = document.createElement('div');
    slot.className = 'slot' + (revealed[i] ? ' revealed' : '');
    slot.textContent = revealed[i] ? secret[i] : '';
    lettersEl.appendChild(slot);
  }
  renderGuessed();
}

/* Render guessed letters (alphabetical) */
function renderGuessed(){
  const arr = Array.from(guessed).sort();
  guessedListEl.innerHTML = '';
  for(const ch of arr){
    const n = document.createElement('div');
    n.className = 'guessed-letter';
    n.textContent = ch;
    guessedListEl.appendChild(n);
  }
}

/* Pick a secret from BANK (avoid immediate repeat) */
function pickSecret(){
  if(BANK.length === 0) BANK = FALLBACK_BANK.slice(0,100);
  let pool = BANK.slice();
  if(lastSecret && pool.length > 1) pool = pool.filter(w => w !== lastSecret);
  return pool[Math.floor(Math.random()*pool.length)];
}

/* Start new game */
function startNewGame(){
  secret = pickSecret().toUpperCase();
  lastSecret = secret;
  revealed = Array.from(secret).map(_=>false);
  guessed = new Set();
  wrong = 0;
  ended = false;
  hideAllPieces();
  endBox.textContent = "";
  render();
  lettersEl.setAttribute('aria-label', `Hidden letters: ${secret.length} letters`);
  guessedListEl.setAttribute('aria-label', 'Guessed letters (alphabetical)');
}

/* Handle guess (uppercase letter) */
function handleGuess(letter){
  if(ended) return;
  if(!/^[A-Z]$/.test(letter)) return;
  if(guessed.has(letter)) return;
  guessed.add(letter);

  let found = false;
  for(let i=0;i<secret.length;i++){
    if(secret[i] === letter){
      revealed[i] = true;
      found = true;
    }
  }
  if(!found){
    wrong++;
    if(wrong >=1 && wrong <=6) revealPiece(wrong);
  }
  render();
  checkEnd();
}

/* Check end conditions */
function checkEnd(){
  if(revealed.every(Boolean)){
    ended = true;
    endBox.textContent = "YOU WIN! PRESS ENTER TO PLAY AGAIN.";
    return;
  }
  if(wrong >= 6){
    ended = true;
    endBox.textContent = `GAME OVER. THE WORD WAS: ${secret}. PRESS ENTER TO PLAY AGAIN.`;
    // reveal all letters
    for(let i=0;i<revealed.length;i++) revealed[i] = true;
    render();
    return;
  }
}

/* Keyboard listener */
window.addEventListener('keydown', (ev) => {
  if(ended && ev.key === 'Enter'){ startNewGame(); return; }
  if(ended) return;
  if(ev.key && ev.key.length === 1 && /^[a-zA-Z]$/.test(ev.key)) handleGuess(ev.key.toUpperCase());
});

/* Build bank from fetched top-5000 text */
async function buildBankFromTop5000(){
  try {
    const r = await fetch(TOP5000_RAW);
    if(!r.ok) throw new Error('fetch failed ' + r.status);
    const txt = await r.text();
    // split into tokens containing letters only
    const tokens = txt.split(/\r?\n/).map(s => s.trim()).filter(Boolean);
    const words = [];
    for(const ln of tokens){
      // split on non-letter chars
      const parts = ln.split(/[^A-Za-z]+/).filter(Boolean);
      for(const p of parts){
        const up = p.toUpperCase();
        if(meetsConstraints(up)) words.push(up);
      }
    }
    // dedupe while preserving order
    const uniq = Array.from(new Set(words));
    if(uniq.length < 100) return null;
    shuffle(uniq);
    return uniq.slice(0,100);
  } catch(err){
    console.warn('Top5000 fetch failed:', err);
    return null;
  }
}

/* Init: attempt to fetch and build bank, else fallback */
(async function init(){
  const fetchedBank = await buildBankFromTop5000();
  if(fetchedBank && fetchedBank.length === 100){
    BANK = fetchedBank;
  } else {
    BANK = FALLBACK_BANK.slice(0,100);
  }
  startNewGame();
})();
</script>
</body>
</html>
